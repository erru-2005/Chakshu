<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - {{ student.studentName }}</title>
    <script src="{{ url_for('static', filename='js/tailwindcss.js') }}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #0f0f10 0%, #1a1a1c 100%);
            min-height: 100vh;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        .profile-image {
            border: 4px solid white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .gradient-text {
            /* Override to matte black for icons/text that used gradient */
            color: #0a0a0a !important;
            background: none !important;
            -webkit-background-clip: initial !important;
            background-clip: initial !important;
        }
        /* Make all Font Awesome icons matte black */
        .fa, .fas, .far, .fal, .fat, .fad, .fab {
            color: #0a0a0a;
        }
    </style>
</head>
<body class="min-h-screen py-4 px-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="glass-effect rounded-2xl p-4 mb-6 shadow-xl">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <span class="inline-block" aria-hidden="true">
                        <i class="fas fa-user-graduate text-4xl" style="color:#000000;"></i>
                    </span>
                    <div>
                        <h1 class="text-2xl md:text-3xl font-extrabold tracking-wide text-gray-900">CHAKSHU</h1>
                        <p class="text-gray-600 text-sm">Welcome, {{ student.studentName }}</p>
                    </div>
                </div>
                <a href="/logout" class="text-gray-800 hover:text-black font-semibold transition duration-200">Logout</a>
            </div>
        </header>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column: Profile Card -->
            <div class="lg:col-span-1">
                <div class="glass-effect rounded-2xl p-6 shadow-xl card-hover">
                    <div class="text-center">
                        <!-- Profile Image -->
                        <div class="mb-4 flex justify-center">
                            {% if student.profileImage %}
                            <img src="{{ url_for('static', filename=student.profileImage) }}" 
                                 alt="Profile" 
                                 class="w-32 h-32 rounded-full object-cover profile-image">
                            {% else %}
                            <div class="w-32 h-32 rounded-full bg-gradient-to-br from-gray-900 to-gray-700 flex items-center justify-center profile-image">
                                <i class="fas fa-user text-5xl text-white"></i>
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- Student Name -->
                        <h2 class="text-2xl font-extrabold text-gray-900 mb-1 tracking-wide">{{ student.studentName }}</h2>
                        <p class="text-gray-600 mb-4 uppercase">{{ student.programName or 'Student' }}</p>
                        
                        <!-- Quick Info -->
                        <div class="space-y-3 mt-6">
                            <div class="bg-gray-100 rounded-lg p-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-600"><i class="fas fa-id-card mr-2"></i>Roll No:</span>
                                    <span class="font-semibold text-gray-800">{{ student.rollNo }}</span>
                                </div>
                            </div>
                            
                            {% if student.regNo %}
                            <div class="bg-gray-100 rounded-lg p-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-600"><i class="fas fa-certificate mr-2"></i>Reg No:</span>
                                    <span class="font-semibold text-gray-800">{{ student.regNo }}</span>
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="bg-gray-100 rounded-lg p-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-gray-600"><i class="fas fa-users mr-2"></i>Class:</span>
                                    <span class="font-semibold text-gray-800">{{ student.classSection }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Details -->
            <div class="lg:col-span-2">
                <!-- Personal Information -->
                <div class="glass-effect rounded-2xl p-6 mb-6 shadow-xl card-hover">
                    <h3 class="text-xl font-extrabold text-gray-900 mb-4 flex items-center tracking-wide">
                        <i class="fas fa-user-circle mr-2 gradient-text"></i>Personal Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-venus-mars gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Gender</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.gender }}</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-birthday-cake gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Date of Birth</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.dob }}</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-tint gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Blood Group</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.bloodGroup or 'N/A' }}</p>
                        </div>
                        
                        {% if student.category %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-tag gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Category</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.category }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="glass-effect rounded-2xl p-6 mb-6 shadow-xl card-hover">
                    <h3 class="text-xl font-extrabold text-gray-900 mb-4 flex items-center tracking-wide">
                        <i class="fas fa-address-book mr-2 gradient-text"></i>Contact Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% if student.email %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-envelope gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Email</span>
                            </div>
                            <p class="text-gray-800 font-semibold break-all">{{ student.email }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.studentContact %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-phone gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Student Contact</span>
                            </div>
                            <p class="text-gray-800 font-semibold">+91 {{ student.studentContact }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.parentNo %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-user-friends gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Parent Contact</span>
                            </div>
                            <p class="text-gray-800 font-semibold">+91 {{ student.parentNo }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.address %}
                        <div class="bg-gray-50 rounded-lg p-4 md:col-span-2">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-map-marker-alt gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Address</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.address }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Academic Information -->
                <div class="glass-effect rounded-2xl p-6 mb-6 shadow-xl card-hover">
                    <h3 class="text-xl font-extrabold text-gray-900 mb-4 flex items-center tracking-wide">
                        <i class="fas fa-graduation-cap mr-2 gradient-text"></i>Academic Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% if student.fatherName %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-male gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Father's Name</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.fatherName }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.pucInstitute %}
                        <div class="bg-gray-50 rounded-lg p-4 md:col-span-2">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-school gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Previous Institute</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.pucInstitute }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.pucPercentage %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-percentage gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">PUC Percentage</span>
                            </div>
                            {% set _pct = ("%.2f"|format((student.pucPercentage|string)|float)) %}
                            <p class="text-gray-800 font-semibold">{% if _pct.endswith('00') %}{{ _pct[:-3] }}{% else %}{{ _pct }}{% endif %}%</p>
                        </div>
                        {% endif %}
                        
                        {% if student.pucYear %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-calendar gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">PUC Year</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.pucYear }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Additional Information -->
                {% if student.state or student.district or student.religion or student.caste or student.abcId %}
                <div class="glass-effect rounded-2xl p-6 mb-6 shadow-xl card-hover">
                    <h3 class="text-xl font-extrabold text-gray-900 mb-4 flex items-center tracking-wide">
                        <i class="fas fa-info-circle mr-2 gradient-text"></i>Additional Information
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% if student.state %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-map gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">State</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.state }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.district %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-map-pin gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">District</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.district }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.religion %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-place-of-worship gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Religion</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.religion }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.caste %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-users gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">Caste</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.caste }}</p>
                        </div>
                        {% endif %}
                        
                        {% if student.abcId %}
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-qrcode gradient-text mr-2"></i>
                                <span class="text-sm text-gray-600">ABC ID</span>
                            </div>
                            <p class="text-gray-800 font-semibold">{{ student.abcId }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-white mt-6">
            <p class="text-sm opacity-75">Â© 2025 Moulya | Developed by Incubation Center | All Rights Reserved.</p>
        </footer>
    </div>
</body>
</html>

<!-- Toast Notification -->
<div id="toast" class="fixed top-6 left-1/2 -translate-x-1/2 z-50 hidden">
    <div id="toastContent" class="flex items-center gap-3 px-5 py-3 rounded-xl shadow-xl bg-white border">
        <i id="toastIcon" class="fas fa-info-circle text-gray-600"></i>
        <span id="toastMessage" class="text-gray-800 font-medium"></span>
    </div>
</div>

<script>
    function showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        const toastMsg = document.getElementById('toastMessage');
        const toastIcon = document.getElementById('toastIcon');
        const toastContent = document.getElementById('toastContent');
        
        toastMsg.textContent = message;
        toastIcon.className = '';
        toastContent.className = 'flex items-center gap-3 px-5 py-3 rounded-xl shadow-xl bg-white border';
        
        if (type === 'success') {
            toastIcon.className = 'fas fa-check-circle text-green-600';
            toastContent.className += ' border-green-200';
        } else if (type === 'error') {
            toastIcon.className = 'fas fa-times-circle text-red-600';
            toastContent.className += ' border-red-200';
        } else if (type === 'warning') {
            toastIcon.className = 'fas fa-exclamation-triangle text-amber-600';
            toastContent.className += ' border-amber-200';
        } else {
            toastIcon.className = 'fas fa-info-circle text-gray-600';
            toastContent.className += ' border-gray-200';
        }
        
        toast.classList.remove('hidden');
        
        clearTimeout(window.__toastTimer);
        window.__toastTimer = setTimeout(() => {
            toast.classList.add('hidden');
        }, 2500);
    }
</script>

